<!DOCTYPE html>
<html lang="en-us">
  <head>
    <meta charset="UTF-8">
    <title>Bridge by afollestad</title>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="stylesheet" type="text/css" href="stylesheets/normalize.css" media="screen">
    <link href='https://fonts.googleapis.com/css?family=Open+Sans:400,700' rel='stylesheet' type='text/css'>
    <link rel="stylesheet" type="text/css" href="stylesheets/stylesheet.css" media="screen">
    <link rel="stylesheet" type="text/css" href="stylesheets/github-light.css" media="screen">
  </head>
  <body>
    <section class="page-header">
      <h1 class="project-name">Bridge</h1>
      <h2 class="project-tagline">A simple but powerful HTTP networking library for Android. It features a Fluent chainable API, powered by Java/Android&#39;s URLConnection classes for maximum compatibility and speed.</h2>
      <a href="https://github.com/afollestad/bridge" class="btn">View on GitHub</a>
      <a href="https://github.com/afollestad/bridge/zipball/master" class="btn">Download .zip</a>
      <a href="https://github.com/afollestad/bridge/tarball/master" class="btn">Download .tar.gz</a>
    </section>

    <section class="main-content">
      <h1>
<a id="bridge" class="anchor" href="#bridge" aria-hidden="true"><span class="octicon octicon-link"></span></a>Bridge</h1>

<p>Bridge is a simple but powerful HTTP networking library for Android. It features a Fluent chainable API,
powered by Java/Android's URLConnection classes for maximum compatibility and speed.</p>

<h1>
<a id="table-of-contents" class="anchor" href="#table-of-contents" aria-hidden="true"><span class="octicon octicon-link"></span></a>Table of Contents</h1>

<h3>
<a id="traditional" class="anchor" href="#traditional" aria-hidden="true"><span class="octicon octicon-link"></span></a>Traditional</h3>

<ol>
<li>
<a href="https://github.com/afollestad/bridge#gradle-dependency">Gradle Dependency</a>

<ol>
<li><a href="https://github.com/afollestad/bridge#repository">Repository</a></li>
<li><a href="https://github.com/afollestad/bridge#dependency">Dependency</a></li>
</ol>
</li>
<li>
<a href="https://github.com/afollestad/bridge#requests">Requests</a>

<ol>
<li><a href="https://github.com/afollestad/bridge#request-basics">Request Basics</a></li>
<li><a href="https://github.com/afollestad/bridge#request-headers">Request Headers</a></li>
<li>
<a href="https://github.com/afollestad/bridge#request-bodies">Request Bodies</a>

<ol>
<li><a href="https://github.com/afollestad/bridge#plain-bodies">Plain Bodies</a></li>
<li><a href="https://github.com/afollestad/bridge#plain-bodies">Form Bodies</a></li>
<li><a href="https://github.com/afollestad/bridge#plain-bodies">MultipartForm Bodies</a></li>
</ol>
</li>
<li><a href="https://github.com/afollestad/bridge#plain-bodies">Streaming Bodies</a></li>
<li><a href="https://github.com/afollestad/bridge#info-callbacks">Info Callbacks</a></li>
</ol>
</li>
<li>
<a href="https://github.com/afollestad/bridge#responses">Responses</a>

<ol>
<li><a href="https://github.com/afollestad/bridge#response-basics">Response Basics</a></li>
<li><a href="https://github.com/afollestad/bridge#response-bodies">Response Bodies</a></li>
</ol>
</li>
<li><a href="https://github.com/afollestad/bridge#error-handling">Error Handling</a></li>
<li>
<a href="https://github.com/afollestad/bridge#async">Async</a>

<ol>
<li><a href="https://github.com/afollestad/bridge#async-requests">Async Requests</a></li>
<li><a href="https://github.com/afollestad/bridge#duplicate-avoidance">Duplicate Avoidance</a></li>
<li><a href="https://github.com/afollestad/bridge#upload-progress">Upload Progress</a></li>
<li><a href="https://github.com/afollestad/bridge#download-progress">Download Progress</a></li>
</ol>
</li>
<li>
<a href="https://github.com/afollestad/bridge#request-cancellation">Request Cancellation</a>

<ol>
<li><a href="https://github.com/afollestad/bridge#cancelling-single-requests">Cancelling Single Requests</a></li>
<li><a href="https://github.com/afollestad/bridge#cancelling-multiple-requests">Cancelling Multiple Requests</a></li>
<li><a href="https://github.com/afollestad/bridge#preventing-cancellation">Preventing Cancellation</a></li>
</ol>
</li>
<li><a href="https://github.com/afollestad/bridge#validation">Validation</a></li>
<li>
<a href="https://github.com/afollestad/bridge#configuration">Configuration</a>

<ol>
<li><a href="https://github.com/afollestad/bridge#host-configuration">Host Configuration</a></li>
<li><a href="https://github.com/afollestad/bridge#default-headers">Default Headers</a></li>
<li><a href="https://github.com/afollestad/bridge#timeout-configuration">Timeout Configuration</a></li>
<li><a href="https://github.com/afollestad/bridge#buffer-size">Buffer Size</a></li>
<li><a href="https://github.com/afollestad/bridge#logging">Logging</a></li>
<li><a href="https://github.com/afollestad/bridge#global-validators">Global Validators</a></li>
</ol>
</li>
<li><a href="https://github.com/afollestad/bridge#cleanup">Cleanup</a></li>
</ol>

<h3>
<a id="conversion" class="anchor" href="#conversion" aria-hidden="true"><span class="octicon octicon-link"></span></a>Conversion</h3>

<ol>
<li>
<a href="https://github.com/afollestad/bridge#request-conversion">Request Conversion</a>

<ol>
<li><a href="https://github.com/afollestad/bridge#json-request-conversion">JSON Request Conversion</a></li>
<li><a href="https://github.com/afollestad/bridge#dot-notation">Dot Notation</a></li>
<li><a href="https://github.com/afollestad/bridge#request-conversion-api">Request Conversion API</a></li>
</ol>
</li>
<li>
<a href="https://github.com/afollestad/bridge#response-conversion">Response Conversion</a>

<ol>
<li><a href="https://github.com/afollestad/bridge#json-response-conversion">JSON Response Conversion</a></li>
<li><a href="https://github.com/afollestad/bridge#dot-notation-1">Dot Notation</a></li>
<li><a href="https://github.com/afollestad/bridge#response-conversion-api">Response Conversion API</a></li>
</ol>
</li>
</ol>

<hr>

<h1>
<a id="gradle-dependency" class="anchor" href="#gradle-dependency" aria-hidden="true"><span class="octicon octicon-link"></span></a>Gradle Dependency</h1>

<p><a href="https://jitpack.io/#afollestad/bridge"> <img src="https://img.shields.io/github/release/afollestad/bridge.svg?label=bridge" alt="JitPack"> </a>
<a href="https://travis-ci.org/afollestad/bridge"><img src="https://travis-ci.org/afollestad/bridge.svg" alt="Build Status"></a></p>

<h3>
<a id="repository" class="anchor" href="#repository" aria-hidden="true"><span class="octicon octicon-link"></span></a>Repository</h3>

<p>Add this in your root <code>build.gradle</code> file (<strong>not</strong> your module <code>build.gradle</code> file):</p>

<div class="highlight highlight-source-groovy-gradle"><pre><span class="pl-en">allprojects</span> {
    repositories {
        <span class="pl-k">..</span>.
        maven { url <span class="pl-s"><span class="pl-pds">"</span>https://jitpack.io<span class="pl-pds">"</span></span> }
    }
}</pre></div>

<h3>
<a id="dependency" class="anchor" href="#dependency" aria-hidden="true"><span class="octicon octicon-link"></span></a>Dependency</h3>

<p>Add this to your module's <code>build.gradle</code> file:</p>

<div class="highlight highlight-source-groovy-gradle"><pre><span class="pl-en">dependencies</span> {
    <span class="pl-k">..</span>.
    compile <span class="pl-s"><span class="pl-pds">'</span>com.github.afollestad:bridge:3.1.0<span class="pl-pds">'</span></span>
}</pre></div>

<hr>

<h1>
<a id="requests" class="anchor" href="#requests" aria-hidden="true"><span class="octicon octicon-link"></span></a>Requests</h1>

<p>The request API in Bridge is very easy to use. </p>

<h3>
<a id="request-basics" class="anchor" href="#request-basics" aria-hidden="true"><span class="octicon octicon-link"></span></a>Request Basics</h3>

<p>The code below will request Google's homepage:</p>

<div class="highlight highlight-source-java"><pre><span class="pl-smi">Request</span> request <span class="pl-k">=</span> <span class="pl-smi">Bridge</span>
    .get(<span class="pl-s"><span class="pl-pds">"</span>https://www.google.com<span class="pl-pds">"</span></span>)
    .request();</pre></div>

<hr>

<p>Bridge allows you to pass format args into request URLs (this applies to <code>get()</code>, <code>post()</code>, <code>put()</code>, <code>delete()</code>, etc.):</p>

<div class="highlight highlight-source-java"><pre><span class="pl-smi">Request</span> request <span class="pl-k">=</span> <span class="pl-smi">Bridge</span>
    .get(<span class="pl-s"><span class="pl-pds">"</span>https://www.google.com/search?q=%s<span class="pl-pds">"</span></span>, searchQuery)
    .request();</pre></div>

<p>There are two advantages to doing this when your requests require query parameters: 
code readability is improved, no string. concatenation is necessary. The contents of
the <code>searchQuery</code> variable are automatically URL encoded for you, e.g spaces are 
replaced with <code>%20</code>.</p>

<h3>
<a id="request-headers" class="anchor" href="#request-headers" aria-hidden="true"><span class="octicon octicon-link"></span></a>Request Headers</h3>

<p>Adding or changing request headers is pretty simple:</p>

<div class="highlight highlight-source-java"><pre><span class="pl-smi">Request</span> request <span class="pl-k">=</span> <span class="pl-smi">Bridge</span>
    .get(<span class="pl-s"><span class="pl-pds">"</span>https://www.google.com<span class="pl-pds">"</span></span>)
    .header(<span class="pl-s"><span class="pl-pds">"</span>User-Agent<span class="pl-pds">"</span></span>, <span class="pl-s"><span class="pl-pds">"</span>My App!<span class="pl-pds">"</span></span>)
    .header(<span class="pl-s"><span class="pl-pds">"</span>CustomHeader<span class="pl-pds">"</span></span>, <span class="pl-s"><span class="pl-pds">"</span>HelloWorld<span class="pl-pds">"</span></span>)
    .request();</pre></div>

<p>If you had the need to do so, you could also set a Map of headers with
the <code>headers(Map&lt;String, Object&gt;)</code> method.</p>

<p><strong>Note</strong>: the <a href="https://github.com/afollestad/bridge#configuration">Configuration</a>
goes over how you can set default headers for all requests.</p>

<h3>
<a id="request-bodies" class="anchor" href="#request-bodies" aria-hidden="true"><span class="octicon octicon-link"></span></a>Request Bodies</h3>

<p>A lot of networking libraries make request bodies a bit difficult. Bridge aims
to make them easy.</p>

<h5>
<a id="plain-bodies" class="anchor" href="#plain-bodies" aria-hidden="true"><span class="octicon octicon-link"></span></a>Plain Bodies</h5>

<p>A description shouldn't be necessary for this:</p>

<div class="highlight highlight-source-java"><pre><span class="pl-smi">String</span> postContent <span class="pl-k">=</span> <span class="pl-s"><span class="pl-pds">"</span>Hello, how are you?<span class="pl-pds">"</span></span>;
<span class="pl-smi">Request</span> request <span class="pl-k">=</span> <span class="pl-smi">Bridge</span>
    .post(<span class="pl-s"><span class="pl-pds">"</span>https://someurl.com/post.js<span class="pl-pds">"</span></span>)
    .body(postContent)
    .request();</pre></div>

<p>In addition to passing a <code>String</code>, other types of "plain" bodies include:</p>

<ul>
<li>byte[]</li>
<li>JSONObject</li>
<li>JSONArray </li>
</ul>

<p>There are other types of bodies discussed in the next few sections, along with 
in the <a href="https://github.com/afollestad/bridge#request-conversion">Request Conversion</a>
section at the bottom (which is a bit more advanced).</p>

<h5>
<a id="form-bodies" class="anchor" href="#form-bodies" aria-hidden="true"><span class="octicon octicon-link"></span></a>Form Bodies</h5>

<p><code>Form</code>'s are commonly used with PUT/POST requests. They're basically the same 
thing as query strings with get requests, but the parameters are included in 
the body of the request rather than the URL.</p>

<div class="highlight highlight-source-java"><pre><span class="pl-smi">Form</span> form <span class="pl-k">=</span> <span class="pl-k">new</span> <span class="pl-smi">Form</span>()
    .add(<span class="pl-s"><span class="pl-pds">"</span>Username<span class="pl-pds">"</span></span>, <span class="pl-s"><span class="pl-pds">"</span>Aidan<span class="pl-pds">"</span></span>)
    .add(<span class="pl-s"><span class="pl-pds">"</span>Password<span class="pl-pds">"</span></span>, <span class="pl-s"><span class="pl-pds">"</span>Hello<span class="pl-pds">"</span></span>);
<span class="pl-smi">Request</span> request <span class="pl-k">=</span> <span class="pl-smi">Bridge</span>
    .post(<span class="pl-s"><span class="pl-pds">"</span>https://someurl.com/login.js<span class="pl-pds">"</span></span>)
    .body(form)
    .request();</pre></div>

<h5>
<a id="multipartform-bodies" class="anchor" href="#multipartform-bodies" aria-hidden="true"><span class="octicon octicon-link"></span></a>MultipartForm Bodies</h5>

<p>A <code>MultipartForm</code> is a bit different than a regular form. Content is added as 
a "part" to the request body. The content is included as raw data associated with 
a content type, allowing you to include entire files. Multipart forms are commonly 
used in HTML forms (e.g. a contact form on a website), and they can be used for 
uploading files to a website.</p>

<div class="highlight highlight-source-java"><pre><span class="pl-smi">MultipartForm</span> form <span class="pl-k">=</span> <span class="pl-k">new</span> <span class="pl-smi">MultipartForm</span>()
    .add(<span class="pl-s"><span class="pl-pds">"</span>Subject<span class="pl-pds">"</span></span>, <span class="pl-s"><span class="pl-pds">"</span>Hello<span class="pl-pds">"</span></span>)
    .add(<span class="pl-s"><span class="pl-pds">"</span>Body<span class="pl-pds">"</span></span>, <span class="pl-s"><span class="pl-pds">"</span>Hey, how are you?<span class="pl-pds">"</span></span>)
    .add(<span class="pl-s"><span class="pl-pds">"</span>FileUpload<span class="pl-pds">"</span></span>, <span class="pl-k">new</span> <span class="pl-smi">File</span>(<span class="pl-s"><span class="pl-pds">"</span>/sdcard/Download/ToUpload.txt<span class="pl-pds">"</span></span>))
    .add(<span class="pl-s"><span class="pl-pds">"</span>FileUpload2<span class="pl-pds">"</span></span>, <span class="pl-s"><span class="pl-pds">"</span>ToUpload2.mp4<span class="pl-pds">"</span></span>, <span class="pl-smi">Pipe</span><span class="pl-k">.</span>forFile(<span class="pl-k">new</span> <span class="pl-smi">File</span>(<span class="pl-s"><span class="pl-pds">"</span>/sdcard/Download/ToUpload2.mp4<span class="pl-pds">"</span></span>)));
<span class="pl-smi">Request</span> request <span class="pl-k">=</span> <span class="pl-smi">Bridge</span>
    .post(<span class="pl-s"><span class="pl-pds">"</span>https://someurl.com/post.js<span class="pl-pds">"</span></span>)
    .body(form)
    .request();</pre></div>

<p>This will automatically set the <code>Content-Type</code> header to <code>multipart/form-data</code>.</p>

<p><strong>Note</strong>: <code>MultipartForm</code> has an <code>add()</code> method that accepts a <code>Pipe</code>. This can 
be used to add parts from streams (see the section below on how <code>Pipe</code> is used). 
<code>add()</code> for <code>File</code> objects is actually using this indirectly for you.</p>

<h5>
<a id="streaming-bodies" class="anchor" href="#streaming-bodies" aria-hidden="true"><span class="octicon octicon-link"></span></a>Streaming Bodies</h5>

<p>Bridge's <code>Pipe</code> API allows you to easily stream data directly into a post body.</p>

<div class="highlight highlight-source-java"><pre><span class="pl-smi">Pipe</span> pipe <span class="pl-k">=</span> <span class="pl-k">new</span> <span class="pl-smi">Pipe</span>() {
    <span class="pl-k">byte</span>[] content <span class="pl-k">=</span> <span class="pl-s"><span class="pl-pds">"</span>Hello, this is a streaming example<span class="pl-pds">"</span></span><span class="pl-k">.</span><span class="pl-en">getBytes</span>();

    <span class="pl-k">@Override</span>
    <span class="pl-k">public</span> <span class="pl-k">void</span> <span class="pl-en">writeTo</span>(<span class="pl-k">@NonNull</span> <span class="pl-smi">OutputStream</span> <span class="pl-v">os</span>, <span class="pl-k">@Nullable</span> <span class="pl-smi">ProgressCallback</span> <span class="pl-v">progressListener</span>) <span class="pl-k">throws</span> <span class="pl-smi">IOException</span> {
        os<span class="pl-k">.</span>write(content);
        <span class="pl-c">// Notify optional progress listener that all data was transferred</span>
        <span class="pl-k">if</span> (progressListener <span class="pl-k">!=</span> <span class="pl-c1">null</span>)
            progressListener<span class="pl-k">.</span>publishProgress(content<span class="pl-k">.</span>length, content<span class="pl-k">.</span>length);
    }

    <span class="pl-k">@NonNull</span>
    <span class="pl-k">@Override</span>
    <span class="pl-k">public</span> <span class="pl-smi">String</span> <span class="pl-en">contentType</span>() {
        <span class="pl-k">return</span> <span class="pl-s"><span class="pl-pds">"</span>text/plain<span class="pl-pds">"</span></span>;
    }

    <span class="pl-k">@Override</span>
    <span class="pl-k">public</span> <span class="pl-k">int</span> <span class="pl-en">contentLength</span>() <span class="pl-k">throws</span> <span class="pl-smi">IOException</span> {
        <span class="pl-k">return</span> content<span class="pl-k">.</span>length;
    }
};

<span class="pl-smi">Request</span> request <span class="pl-k">=</span> <span class="pl-smi">Bridge</span>
    .post(<span class="pl-s"><span class="pl-pds">"</span>https://someurl.com/post.js<span class="pl-pds">"</span></span>)
    .body(pipe)
    .request();</pre></div>

<p><strong>Note</strong>: the value returned for <code>contentType()</code> in the <code>Pipe</code> is automatically set
to the value of the associated header. You can override that by changing the header 
after the body is set.</p>

<p><code>Pipe</code> has three static convenience methods that create a pre-built <code>Pipe</code> instance
for certain uses:</p>

<div class="highlight highlight-source-java"><pre><span class="pl-smi">Pipe</span> uriPipe <span class="pl-k">=</span> <span class="pl-smi">Pipe</span><span class="pl-k">.</span>forUri(<span class="pl-v">this</span>, <span class="pl-smi">Uri</span><span class="pl-k">.</span>parse(
    <span class="pl-s"><span class="pl-pds">"</span>content://com.example.provider/documents/images/1<span class="pl-pds">"</span></span>));

<span class="pl-smi">Pipe</span> filePipe <span class="pl-k">=</span> <span class="pl-smi">Pipe</span><span class="pl-k">.</span>forFile(<span class="pl-k">new</span> <span class="pl-smi">File</span>(<span class="pl-s"><span class="pl-pds">"</span>/sdcard/myfile.txt<span class="pl-pds">"</span></span>));

<span class="pl-smi">InputStream</span> is <span class="pl-k">=</span> <span class="pl-c">// ...</span>
<span class="pl-smi">Pipe</span> transferPipe <span class="pl-k">=</span> <span class="pl-smi">Pipe</span><span class="pl-k">.</span>forStream(is, <span class="pl-s"><span class="pl-pds">"</span>text/plain<span class="pl-pds">"</span></span>);</pre></div>

<p>They should be mostly self-explanatory.</p>

<h3>
<a id="info-callbacks" class="anchor" href="#info-callbacks" aria-hidden="true"><span class="octicon octicon-link"></span></a>Info Callbacks</h3>

<p>You can set an info callback to receive various events, including a 
connection being established, and request bodies being sent:</p>

<div class="highlight highlight-source-java"><pre><span class="pl-smi">Request</span> request <span class="pl-k">=</span> <span class="pl-smi">Bridge</span>
    .get(<span class="pl-s"><span class="pl-pds">"</span>https://www.google.com<span class="pl-pds">"</span></span>)
    .infoCallback(<span class="pl-k">new</span> <span class="pl-smi">InfoCallback</span>() {
        <span class="pl-k">@Override</span>
        <span class="pl-k">public</span> <span class="pl-k">void</span> <span class="pl-en">onConnected</span>(<span class="pl-smi">Request</span> <span class="pl-v">request</span>) {
            <span class="pl-c">// Connection to Google established</span>
        }

        <span class="pl-k">@Override</span>
        <span class="pl-k">public</span> <span class="pl-k">void</span> <span class="pl-en">onRequestSent</span>(<span class="pl-smi">Request</span> <span class="pl-v">request</span>) {
            <span class="pl-c">// This method is optional to override</span>
            <span class="pl-c">// Indicates request body was sent to Google</span>
        }
    })<span class="pl-k">.</span>request();</pre></div>

<p>It's likely that more will be added to this later.</p>

<hr>

<h1>
<a id="responses" class="anchor" href="#responses" aria-hidden="true"><span class="octicon octicon-link"></span></a>Responses</h1>

<p>Like requests, Bridge intends to make response interaction super easy.</p>

<h3>
<a id="response-basics" class="anchor" href="#response-basics" aria-hidden="true"><span class="octicon octicon-link"></span></a>Response Basics</h3>

<p>The code below should be mostly self explanatory:</p>

<div class="highlight highlight-source-java"><pre><span class="pl-smi">Request</span> request <span class="pl-k">=</span> <span class="pl-smi">Bridge</span>
    .get(<span class="pl-s"><span class="pl-pds">"</span>https://www.google.com<span class="pl-pds">"</span></span>)
    .request();

<span class="pl-smi">Response</span> response <span class="pl-k">=</span> request<span class="pl-k">.</span>response();
<span class="pl-k">if</span> (response<span class="pl-k">.</span>isSuccessful()) {
    <span class="pl-c">// Request returned HTTP status 200-300</span>
} <span class="pl-k">else</span> {
    <span class="pl-c">// Request returned an HTTP error status</span>
}</pre></div>

<p>You can also have Bridge throw an Exception in the event that <code>isSuccessful()</code>
returns false:</p>

<div class="highlight highlight-source-java"><pre><span class="pl-k">try</span> {
    <span class="pl-smi">Request</span> request  <span class="pl-k">=</span> <span class="pl-smi">Bridge</span>
        .get(<span class="pl-s"><span class="pl-pds">"</span>https://www.google.com<span class="pl-pds">"</span></span>)
        .throwIfNotSuccess()
        .request();
    <span class="pl-smi">Response</span> response <span class="pl-k">=</span> request<span class="pl-k">.</span>response();
    <span class="pl-c">// Use successful response</span>
} <span class="pl-k">catch</span>(<span class="pl-smi">BridgeException</span> e) {
    <span class="pl-c">// See the error handling section</span>
}</pre></div>

<p>If you don't need a reference to the <code>Request</code> object, you can immediately retrieve the <code>Response</code>:</p>

<div class="highlight highlight-source-java"><pre><span class="pl-smi">Response</span> response <span class="pl-k">=</span> <span class="pl-smi">Bridge</span>
    .get(<span class="pl-s"><span class="pl-pds">"</span>https://www.google.com<span class="pl-pds">"</span></span>)
    .response();</pre></div>

<hr>

<p>You can retrieve response headers similar to how request headers are set:</p>

<div class="highlight highlight-source-java"><pre><span class="pl-smi">Response</span> response <span class="pl-k">=</span> <span class="pl-c">// ...</span>
<span class="pl-smi">String</span> headerValue <span class="pl-k">=</span> response<span class="pl-k">.</span>header(<span class="pl-s"><span class="pl-pds">"</span>Header-Name<span class="pl-pds">"</span></span>);</pre></div>

<p>Headers can also have multiple values, separated by commas:</p>

<div class="highlight highlight-source-java"><pre><span class="pl-smi">Response</span> response <span class="pl-k">=</span> <span class="pl-c">// ...</span>
<span class="pl-k">List&lt;<span class="pl-smi">String</span>&gt;</span> values <span class="pl-k">=</span> response<span class="pl-k">.</span>headerList(<span class="pl-s"><span class="pl-pds">"</span>Header-Name<span class="pl-pds">"</span></span>);</pre></div>

<p>You can even retrieve the full map of headers:</p>

<div class="highlight highlight-source-java"><pre><span class="pl-smi">Response</span> response <span class="pl-k">=</span> <span class="pl-c">// ...</span>
<span class="pl-k">Map&lt;<span class="pl-smi">String</span>, <span class="pl-k">List&lt;<span class="pl-smi">String</span>&gt;</span>&gt;</span> headers <span class="pl-k">=</span> response<span class="pl-k">.</span>headers();</pre></div>

<p>Since <em>Content-Type</em> and <em>Content-Length</em> are commonly used response headers,
there's two convenience methods for these values:</p>

<div class="highlight highlight-source-java"><pre><span class="pl-smi">Response</span> response <span class="pl-k">=</span> <span class="pl-c">// ...</span>
<span class="pl-smi">String</span> contentType <span class="pl-k">=</span> response<span class="pl-k">.</span>contentType();
<span class="pl-k">int</span> contentLength <span class="pl-k">=</span> response<span class="pl-k">.</span>contentLength();</pre></div>

<h3>
<a id="response-bodies" class="anchor" href="#response-bodies" aria-hidden="true"><span class="octicon octicon-link"></span></a>Response Bodies</h3>

<p>Bridge includes many methods to make converting responses to object types you need
easy. The code below should be self-explanatory:</p>

<div class="highlight highlight-source-java"><pre><span class="pl-smi">Response</span> response <span class="pl-k">=</span> <span class="pl-c">// ...</span>

<span class="pl-k">byte</span>[] responseRawData <span class="pl-k">=</span> response<span class="pl-k">.</span>asBytes();

<span class="pl-c">// Converts asBytes() to a UTF-8 encoded String.</span>
<span class="pl-smi">String</span> responseString <span class="pl-k">=</span> response<span class="pl-k">.</span>asString();

<span class="pl-c">// If you set this to a TextView, it will display HTML formatting</span>
<span class="pl-smi">Spanned</span> responseHtml <span class="pl-k">=</span> response<span class="pl-k">.</span>asHtml();

<span class="pl-c">// Cached in the Response object, using this method multiples will reference the same JSONObject.</span>
<span class="pl-c">// This allows your app to not re-parse the JSON if it's used multiple times.</span>
<span class="pl-smi">JSONObject</span> responseJsonObject <span class="pl-k">=</span> response<span class="pl-k">.</span>asJsonObject();

<span class="pl-c">// Cached in the Response object, using this method multiples will reference the same JSONArray.</span>
<span class="pl-c">// This allows your app to not re-parse the JSON if it's used multiple times.</span>
<span class="pl-smi">JSONArray</span> responseJsonArray <span class="pl-k">=</span> response<span class="pl-k">.</span>asJsonArray();

<span class="pl-c">// Don't forget to recycle!</span>
<span class="pl-c">// Once you use this method once, the resulting Bitmap is cached in the Response object,</span>
<span class="pl-c">// Meaning asBitmap() will always return the same Bitmap from any reference to this response.</span>
<span class="pl-smi">Bitmap</span> responseImage <span class="pl-k">=</span> response<span class="pl-k">.</span>asBitmap();

<span class="pl-c">// Save the response content to a File of your choosing</span>
response<span class="pl-k">.</span>asFile(<span class="pl-k">new</span> <span class="pl-smi">File</span>(<span class="pl-s"><span class="pl-pds">"</span>/sdcard/Download.extension<span class="pl-pds">"</span></span>));

<span class="pl-c">// Returns String, Spanned (for HTML), JSONObject, JSONArray, Bitmap, or byte[]</span>
<span class="pl-c">// based on the Content-Type header.</span>
<span class="pl-smi">Object</span> suggested <span class="pl-k">=</span> response<span class="pl-k">.</span>asSuggested();</pre></div>

<p>If you're not interested in using the <code>Request</code> or <code>Response</code> object during
requests, you can immediately retrieve the response body:</p>

<div class="highlight highlight-source-java"><pre><span class="pl-smi">String</span> responseBody <span class="pl-k">=</span> <span class="pl-smi">Bridge</span>
    .get(<span class="pl-s"><span class="pl-pds">"</span>https://www.google.com<span class="pl-pds">"</span></span>)
    .asString();</pre></div>

<p><code>asString()</code> could be replaced with any of the body conversion methods above.
Using this will automatically use <code>throwIfNotSuccessful()</code>, so a <code>BridgeException</code>
is thrown in case that the HTTP status code is not 200-300.</p>

<hr>

<h1>
<a id="error-handling" class="anchor" href="#error-handling" aria-hidden="true"><span class="octicon octicon-link"></span></a>Error Handling</h1>

<p>The <code>BridgeException</code> class is used throughout the library and acts as a single 
exception provider. This helps avoid the need for different exception classes, 
or very unspecific Exceptions.</p>

<p>If you wanted, you could just display errors to the user using <code>BridgeException#getMessage()</code>. 
However, <code>BridgeException</code> lets you know exactly what happened before the user 
sees anything.</p>

<hr>

<p>The <code>BridgeException#reason()</code> method returns a constants that indicate why the exception 
was thrown. If the Exception is for a request, you can retrieve the <code>Request</code> with 
<code>BridgeException#request()</code>. If the <code>Exception</code> is for a response, you can retrieve the 
<code>Response</code> with <code>BridgeException#response()</code>.</p>

<div class="highlight highlight-source-java"><pre><span class="pl-smi">BridgeException</span> e <span class="pl-k">=</span> <span class="pl-c">// ...</span>
<span class="pl-k">switch</span> (e<span class="pl-k">.</span>reason()) {
    <span class="pl-k">case</span> <span class="pl-smi">BridgeException</span><span class="pl-c1"><span class="pl-k">.</span>REASON_REQUEST_CANCELLED</span><span class="pl-k">:</span> {
        <span class="pl-smi">Request</span> request <span class="pl-k">=</span> e<span class="pl-k">.</span>request();
        <span class="pl-c">// Used in BridgeExceptions passed to async request callbacks</span>
        <span class="pl-c">// when the associated request was cancelled.</span>
        <span class="pl-k">break</span>;
    }
    <span class="pl-k">case</span> <span class="pl-smi">BridgeException</span><span class="pl-c1"><span class="pl-k">.</span>REASON_REQUEST_TIMEOUT</span><span class="pl-k">:</span> {
        <span class="pl-smi">Request</span> request <span class="pl-k">=</span> e<span class="pl-k">.</span>request();
        <span class="pl-c">// The request timed out (self explanatory obviously)</span>
        <span class="pl-k">break</span>;
    }
    <span class="pl-k">case</span> <span class="pl-smi">BridgeException</span><span class="pl-c1"><span class="pl-k">.</span>REASON_REQUEST_FAILED</span><span class="pl-k">:</span> {
        <span class="pl-smi">Request</span> request <span class="pl-k">=</span> e<span class="pl-k">.</span>request();
        <span class="pl-c">// Thrown when a general networking error occurs during a request,</span>
        <span class="pl-c">// not including timeouts.</span>
        <span class="pl-k">break</span>;
    }
    <span class="pl-k">case</span> <span class="pl-smi">BridgeException</span><span class="pl-c1"><span class="pl-k">.</span>REASON_RESPONSE_UNSUCCESSFUL</span><span class="pl-k">:</span> {
        <span class="pl-smi">Response</span> response <span class="pl-k">=</span> e<span class="pl-k">.</span>response();
        <span class="pl-c">// Thrown by throwIfNotSuccess(), when you explicitly want an</span>
        <span class="pl-c">// Exception be thrown if the status code was unsuccessful.</span>
        <span class="pl-k">break</span>;
    }
    <span class="pl-k">case</span> <span class="pl-smi">BridgeException</span><span class="pl-c1"><span class="pl-k">.</span>REASON_RESPONSE_UNPARSEABLE</span><span class="pl-k">:</span> {
        <span class="pl-smi">Response</span> response <span class="pl-k">=</span> e<span class="pl-k">.</span>response();
        <span class="pl-c">// Thrown by the response conversion methods (e.g. asJsonObject())</span>
        <span class="pl-c">// When the response content can't be successfully returned in the</span>
        <span class="pl-c">// requested format. E.g. a JSON error.</span>
        <span class="pl-k">break</span>;
    }
    <span class="pl-k">case</span> <span class="pl-smi">BridgeException</span><span class="pl-c1"><span class="pl-k">.</span>REASON_RESPONSE_IOERROR</span><span class="pl-k">:</span> {
        <span class="pl-smi">Response</span> response <span class="pl-k">=</span> e<span class="pl-k">.</span>response();
        <span class="pl-c">// Thrown by the asFile() response converter when the library</span>
        <span class="pl-c">// is unable to save the content to a file.</span>
        <span class="pl-k">break</span>;
    }
    <span class="pl-k">case</span> <span class="pl-smi">BridgeException</span><span class="pl-c1"><span class="pl-k">.</span>REASON_RESPONSE_VALIDATOR_FALSE</span><span class="pl-k">:</span>
    <span class="pl-k">case</span> <span class="pl-smi">BridgeException</span><span class="pl-c1"><span class="pl-k">.</span>REASON_RESPONSE_VALIDATOR_ERROR</span><span class="pl-k">:</span>
        <span class="pl-smi">String</span> validatorId <span class="pl-k">=</span> e<span class="pl-k">.</span>validatorId();
        <span class="pl-c">// Discussed in the Validators section</span>
        <span class="pl-k">break</span>;
}</pre></div>

<p><strong>Note</strong>: you do not need to handle all of these cases everywhere a <code>BridgeException</code> 
is thrown. The comments within the above example code indicate where those reasons are generally used.</p>

<hr>

<h1>
<a id="async" class="anchor" href="#async" aria-hidden="true"><span class="octicon octicon-link"></span></a>Async</h1>

<p>Up until now, all code has been syncronous, meaning it gets run on the calling thread.
Android does not allow you to perform networking options on the UI thread, for good reasons.
Asyncronous requests become very important when you don't want to handle threading yourself.
Plus, Bridge comes with some huge advantages when using async methods.</p>

<h3>
<a id="async-requests" class="anchor" href="#async-requests" aria-hidden="true"><span class="octicon octicon-link"></span></a>Async Requests</h3>

<p>Here's a basic example of an async request. Obviously, <code>get()</code> can be replaced with the
other HTTP methods such as <code>post()</code>.</p>

<div class="highlight highlight-source-java"><pre><span class="pl-smi">Bridge</span>
    .get(<span class="pl-s"><span class="pl-pds">"</span>https://www.google.com<span class="pl-pds">"</span></span>)
    .throwIfNotSuccess() <span class="pl-c">// optional</span>
    .request(<span class="pl-k">new</span> <span class="pl-smi">Callback</span>() {
        <span class="pl-k">@Override</span>
        <span class="pl-k">public</span> <span class="pl-k">void</span> <span class="pl-en">response</span>(<span class="pl-smi">Request</span> <span class="pl-v">request</span>, <span class="pl-smi">Response</span> <span class="pl-v">response</span>, <span class="pl-smi">BridgeException</span> <span class="pl-v">e</span>) {
            <span class="pl-k">if</span> (e <span class="pl-k">!=</span> <span class="pl-c1">null</span>) {
                <span class="pl-c">// See the 'Error Handling' section for information on how to process BridgeExceptions</span>
                <span class="pl-k">int</span> reason <span class="pl-k">=</span> e<span class="pl-k">.</span>reason();
            } <span class="pl-k">else</span> {
                <span class="pl-c">// Use the Response object</span>
                <span class="pl-smi">String</span> responseContent <span class="pl-k">=</span> response<span class="pl-k">.</span>asString();
            }
        }
    });</pre></div>

<p>Like syncronous requests, there are shortcuts to response conversion:</p>

<div class="highlight highlight-source-java"><pre><span class="pl-smi">Bridge</span>
    .get(<span class="pl-s"><span class="pl-pds">"</span>http://www.google.com<span class="pl-pds">"</span></span>)
    .asString(<span class="pl-k">new</span> <span class="pl-k">ResponseConvertCallback&lt;<span class="pl-smi">String</span>&gt;</span>() {
        <span class="pl-k">@Override</span>
        <span class="pl-k">public</span> <span class="pl-k">void</span> <span class="pl-en">onResponse</span>(<span class="pl-k">@NonNull</span> <span class="pl-smi">Response</span> <span class="pl-v">response</span>, <span class="pl-k">@Nullable</span> <span class="pl-smi">String</span> <span class="pl-v">object</span>, <span class="pl-k">@Nullable</span> <span class="pl-smi">BridgeException</span> <span class="pl-v">e</span>) {
            <span class="pl-k">if</span> (e <span class="pl-k">!=</span> <span class="pl-c1">null</span>) {
                <span class="pl-c">// See the 'Error Handling' section for information on how to process BridgeExceptions</span>
                <span class="pl-k">int</span> reason <span class="pl-k">=</span> e<span class="pl-k">.</span>reason();
            } <span class="pl-k">else</span> {
                <span class="pl-c">// Use object parameter</span>
            }
        }
    });</pre></div>

<p>Not only is the calling thread <em>not</em> blocked, duplicate avoidance also comes 
into the picture (see the section below).</p>

<h3>
<a id="duplicate-avoidance" class="anchor" href="#duplicate-avoidance" aria-hidden="true"><span class="octicon octicon-link"></span></a>Duplicate Avoidance</h3>

<p>Duplicate avoidance is a feature of Bridge which allows you to avoid making multiple
requests to a URL at the same time.</p>

<div class="highlight highlight-source-java"><pre><span class="pl-smi">Bridge</span><span class="pl-k">.</span>get(<span class="pl-s"><span class="pl-pds">"</span>http://www.google.com<span class="pl-pds">"</span></span>)
    .request(<span class="pl-k">new</span> <span class="pl-smi">Callback</span>() {
        <span class="pl-k">@Override</span>
        <span class="pl-k">public</span> <span class="pl-k">void</span> <span class="pl-en">response</span>(<span class="pl-smi">Request</span> <span class="pl-v">request</span>, <span class="pl-smi">Response</span> <span class="pl-v">response</span>, <span class="pl-smi">BridgeException</span> <span class="pl-v">e</span>) {
            <span class="pl-c">// Use error or response</span>
        }
    });
<span class="pl-smi">Bridge</span><span class="pl-k">.</span>get(<span class="pl-s"><span class="pl-pds">"</span>http://www.google.com<span class="pl-pds">"</span></span>)
    .request(<span class="pl-k">new</span> <span class="pl-smi">Callback</span>() {
        <span class="pl-k">@Override</span>
        <span class="pl-k">public</span> <span class="pl-k">void</span> <span class="pl-en">response</span>(<span class="pl-smi">Request</span> <span class="pl-v">request</span>, <span class="pl-smi">Response</span> <span class="pl-v">response</span>, <span class="pl-smi">BridgeException</span> <span class="pl-v">e</span>) {
            <span class="pl-c">// Use error or response</span>
        }
    });</pre></div>

<p>The above code requests Google's homepage in rapid succession. Since the first request
will most likely not finish before the computer has a chance to begin requesting the second,
Bridge will pool these requests together. The second request does not get exectued, instead, 
it waits for the first to finish executing, and returns the response to both callbacks at the same time.</p>

<p>There is no limit to how many requests can be pooled. Bridge's sample project requests an entire
page of images, but the image is only downloaded once.</p>

<h3>
<a id="upload-progress" class="anchor" href="#upload-progress" aria-hidden="true"><span class="octicon octicon-link"></span></a>Upload Progress</h3>

<p>Upload progress is pretty straight forward:</p>

<div class="highlight highlight-source-java"><pre><span class="pl-smi">Bridge</span>
    .post(<span class="pl-s"><span class="pl-pds">"</span>https://someurl.com/upload.js<span class="pl-pds">"</span></span>)
    .body(<span class="pl-smi">Pipe</span><span class="pl-k">.</span>forUri(<span class="pl-v">this</span>, data<span class="pl-k">.</span>getData()))
    .uploadProgress(<span class="pl-k">new</span> <span class="pl-smi">ProgressCallback</span>() {
        <span class="pl-k">@Override</span>
        <span class="pl-k">public</span> <span class="pl-k">void</span> <span class="pl-en">progress</span>(<span class="pl-smi">Request</span> <span class="pl-v">request</span>, <span class="pl-k">int</span> <span class="pl-v">current</span>, <span class="pl-k">int</span> <span class="pl-v">total</span>, <span class="pl-k">int</span> <span class="pl-v">percent</span>) {
            <span class="pl-c">// Use progress</span>
        }
    })
    .request(<span class="pl-k">new</span> <span class="pl-smi">Callback</span>() {
        <span class="pl-k">@Override</span>
        <span class="pl-k">public</span> <span class="pl-k">void</span> <span class="pl-en">response</span>(<span class="pl-smi">Request</span> <span class="pl-v">request</span>, <span class="pl-smi">Response</span> <span class="pl-v">response</span>, <span class="pl-smi">BridgeException</span> <span class="pl-v">e</span>) {
            <span class="pl-c">// Use response</span>
        }
    });</pre></div>

<h3>
<a id="download-progress" class="anchor" href="#download-progress" aria-hidden="true"><span class="octicon octicon-link"></span></a>Download Progress</h3>

<p>The callback used to receive asyncronous request results has an optional <code>progress</code> method
that can be overidden in your callback:</p>

<div class="highlight highlight-source-java"><pre><span class="pl-smi">Bridge</span>
    .get(<span class="pl-s"><span class="pl-pds">"</span>http://someurl.com/bigfile.extension<span class="pl-pds">"</span></span>)
    .request(<span class="pl-k">new</span> <span class="pl-smi">Callback</span>() {
        <span class="pl-k">@Override</span>
        <span class="pl-k">public</span> <span class="pl-k">void</span> <span class="pl-en">response</span>(<span class="pl-smi">Request</span> <span class="pl-v">request</span>, <span class="pl-smi">Response</span> <span class="pl-v">response</span>, <span class="pl-smi">BridgeException</span> <span class="pl-v">e</span>) {
            <span class="pl-c">// Use Response or error</span>
        }

        <span class="pl-k">@Override</span>
        <span class="pl-k">public</span> <span class="pl-k">void</span> <span class="pl-en">progress</span>(<span class="pl-smi">Request</span> <span class="pl-v">request</span>, <span class="pl-k">int</span> <span class="pl-v">current</span>, <span class="pl-k">int</span> <span class="pl-v">total</span>, <span class="pl-k">int</span> <span class="pl-v">percent</span>) {
            <span class="pl-c">// Progress updates</span>
        }
    });</pre></div>

<p><strong>Note</strong>: progress callbacks are only used if the library is able to deetermine the size 
of the content being downloaded. Generally, this means the requested URL needs to return a 
value for the <em>Content-Length</em> header. When it comes to <code>Pipe</code>'s, the <code>Pipe</code> handles reporting
progress to the progress callback on its own.</p>

<hr>

<h1>
<a id="request-cancellation" class="anchor" href="#request-cancellation" aria-hidden="true"><span class="octicon octicon-link"></span></a>Request Cancellation</h1>

<p>Request cancellation is another cool feature that Bridge specializes in.
Note that it only works with asyncronous requests, syncronous requests
can't be cancelled since they can block the main thread.</p>

<h3>
<a id="cancelling-single-requests" class="anchor" href="#cancelling-single-requests" aria-hidden="true"><span class="octicon octicon-link"></span></a>Cancelling Single Requests</h3>

<p>The <code>Request</code> object has a simple <code>cancel()</code> method:</p>

<div class="highlight highlight-source-java"><pre><span class="pl-smi">Request</span> request <span class="pl-k">=</span> <span class="pl-smi">Bridge</span>
    .get(<span class="pl-s"><span class="pl-pds">"</span>https://www.google.com<span class="pl-pds">"</span></span>)
    .request(<span class="pl-k">new</span> <span class="pl-smi">Callback</span>() {
        <span class="pl-k">@Override</span>
        <span class="pl-k">public</span> <span class="pl-k">void</span> <span class="pl-en">response</span>(<span class="pl-smi">Request</span> <span class="pl-v">request</span>, <span class="pl-smi">Response</span> <span class="pl-v">response</span>, <span class="pl-smi">BridgeException</span> <span class="pl-v">e</span>) {
            <span class="pl-c">// Use error or response</span>
        }
    });
request<span class="pl-k">.</span>cancel();</pre></div>

<p>When the request is cancelled, the callback receives a <code>BridgeException</code>. <code>reason()</code> will
return <code>BridgeException.REASON_REQUEST_CANCELLED</code>. Most apps will probably ignore the error 
in this case.</p>

<h3>
<a id="cancelling-multiple-requests" class="anchor" href="#cancelling-multiple-requests" aria-hidden="true"><span class="octicon octicon-link"></span></a>Cancelling Multiple Requests</h3>

<p>The <code>Bridge</code> class allows you to cancel multiple (or all) active async requests.</p>

<h5>
<a id="all-active" class="anchor" href="#all-active" aria-hidden="true"><span class="octicon octicon-link"></span></a>All Active</h5>

<p>This code will cancel all active requests, regardless of method or URL:</p>

<div class="highlight highlight-source-java"><pre><span class="pl-smi">Bridge</span><span class="pl-k">.</span>cancelAll()<span class="pl-k">.</span>commit();</pre></div>

<h5>
<a id="method-urlregex" class="anchor" href="#method-urlregex" aria-hidden="true"><span class="octicon octicon-link"></span></a>Method, URL/Regex</h5>

<p>You can even cancel all active requests that match an HTTP method and a URL or regular expression pattern.</p>

<p>This will cancel all GET requests to any URL starting with http:// and ending with .png:</p>

<div class="highlight highlight-source-java"><pre><span class="pl-k">int</span> count <span class="pl-k">=</span> <span class="pl-smi">Bridge</span><span class="pl-k">.</span>cancelAll()
    .method(<span class="pl-smi">Method</span><span class="pl-c1"><span class="pl-k">.</span>GET</span>)
    .url(<span class="pl-s"><span class="pl-pds">"</span>http://.*<span class="pl-cce">\\</span>.png<span class="pl-pds">"</span></span>)
    .commit();</pre></div>

<p><code>.*</code> is a wildcard in regular expressions, <code>\\</code> escapes the period to make it literal.</p>

<p>If you want to cancel all requests to a specific URL, you can use <code>Pattern.quote()</code> to specify a regex that matches literal text:</p>

<div class="highlight highlight-source-java"><pre><span class="pl-k">int</span> count <span class="pl-k">=</span> <span class="pl-smi">Bridge</span><span class="pl-k">.</span>cancelAll()
    .method(<span class="pl-smi">Method</span><span class="pl-c1"><span class="pl-k">.</span>GET</span>)
    .url(<span class="pl-smi">Pattern</span><span class="pl-k">.</span>quote(<span class="pl-s"><span class="pl-pds">"</span>http://www.android.com/media/android_vector.jpg<span class="pl-pds">"</span></span>))
    .commit();</pre></div>

<h5>
<a id="tags" class="anchor" href="#tags" aria-hidden="true"><span class="octicon octicon-link"></span></a>Tags</h5>

<p>When making a request, you can tag it with a value (of any type):</p>

<div class="highlight highlight-source-java"><pre><span class="pl-smi">Bridge</span><span class="pl-k">.</span>get(<span class="pl-s"><span class="pl-pds">"</span>http://www.google.com<span class="pl-pds">"</span></span>)
    .tag(<span class="pl-s"><span class="pl-pds">"</span>Hello!<span class="pl-pds">"</span></span>)
    .request(<span class="pl-k">new</span> <span class="pl-smi">Callback</span>() {
        <span class="pl-k">@Override</span>
        <span class="pl-k">public</span> <span class="pl-k">void</span> <span class="pl-en">response</span>(<span class="pl-smi">Request</span> <span class="pl-v">request</span>, <span class="pl-smi">Response</span> <span class="pl-v">response</span>, <span class="pl-smi">BridgeException</span> <span class="pl-v">e</span>) {
            <span class="pl-c">// Use response or error</span>
        }
    });</pre></div>

<p>You can then cancel all requests which have that tag:</p>

<div class="highlight highlight-source-java"><pre><span class="pl-smi">Bridge</span><span class="pl-k">.</span>cancelAll()
    .tag(<span class="pl-s"><span class="pl-pds">"</span>Hello!<span class="pl-pds">"</span></span>)
    .commit();</pre></div>

<h3>
<a id="preventing-cancellation" class="anchor" href="#preventing-cancellation" aria-hidden="true"><span class="octicon octicon-link"></span></a>Preventing Cancellation</h3>

<p>There are certain situations in which you wouldn't want to allow a request to be cancelled. 
For an example, your app may make calls to <code>Bridge.cancelAll().commit()</code> when an <code>Activity</code> pauses; 
that way, all requests that were active in that screen are cancelled. However, there may be a 
<code>Service</code> in your app that's making requests in the background that you would want to maintain. 
You can make those requests non-cancellable:</p>

<div class="highlight highlight-source-java"><pre><span class="pl-smi">Bridge</span><span class="pl-k">.</span>get(<span class="pl-s"><span class="pl-pds">"</span>http://www.google.com<span class="pl-pds">"</span></span>)
    .cancellable(<span class="pl-c1">false</span>)
    .request(<span class="pl-k">new</span> <span class="pl-smi">Callback</span>() {
        <span class="pl-k">@Override</span>
        <span class="pl-k">public</span> <span class="pl-k">void</span> <span class="pl-en">response</span>(<span class="pl-smi">Request</span> <span class="pl-v">request</span>, <span class="pl-smi">Response</span> <span class="pl-v">response</span>, <span class="pl-smi">BridgeException</span> <span class="pl-v">e</span>) {
            <span class="pl-c">// Use response or error</span>
        }
    });</pre></div>

<p>This request will be ignored by <code>Bridge.cancelAll()</code> unless cancellation is forced:</p>

<div class="highlight highlight-source-java"><pre><span class="pl-smi">Bridge</span><span class="pl-k">.</span>cancelAll()
    .force()
    .commit();</pre></div>

<hr>

<h1>
<a id="validation" class="anchor" href="#validation" aria-hidden="true"><span class="octicon octicon-link"></span></a>Validation</h1>

<p>Validators allow you to provide consistent checking that certain conditions are true for a response.</p>

<div class="highlight highlight-source-java"><pre><span class="pl-smi">ResponseValidator</span> validator <span class="pl-k">=</span> <span class="pl-k">new</span> <span class="pl-smi">ResponseValidator</span>() {
    <span class="pl-k">@Override</span>
    <span class="pl-k">public</span> <span class="pl-k">boolean</span> <span class="pl-en">validate</span>(<span class="pl-k">@NonNull</span> <span class="pl-smi">Response</span> <span class="pl-v">response</span>) <span class="pl-k">throws</span> <span class="pl-smi">Exception</span> {
        <span class="pl-smi">JSONObject</span> json <span class="pl-k">=</span> response<span class="pl-k">.</span>asJsonObject();
        <span class="pl-k">return</span> json<span class="pl-k">.</span>getBoolean(<span class="pl-s"><span class="pl-pds">"</span>success<span class="pl-pds">"</span></span>);
    }

    <span class="pl-k">@NonNull</span>
    <span class="pl-k">@Override</span>
    <span class="pl-k">public</span> <span class="pl-smi">String</span> <span class="pl-en">id</span>() {
        <span class="pl-k">return</span> <span class="pl-s"><span class="pl-pds">"</span>custom-validator<span class="pl-pds">"</span></span>;
    }
};
<span class="pl-k">try</span> {
    <span class="pl-smi">JSONObject</span> response <span class="pl-k">=</span> <span class="pl-smi">Bridge</span>
        .get(<span class="pl-s"><span class="pl-pds">"</span>http://www.someurl.com/api/test<span class="pl-pds">"</span></span>)
        .validators(validator)
        .asJsonObject();
} <span class="pl-k">catch</span> (<span class="pl-smi">BridgeException</span> e) {
    <span class="pl-k">if</span> (e<span class="pl-k">.</span>reason() <span class="pl-k">==</span> <span class="pl-smi">BridgeException</span><span class="pl-c1"><span class="pl-k">.</span>REASON_RESPONSE_VALIDATOR_FALSE</span>) {
        <span class="pl-smi">String</span> validatorId <span class="pl-k">=</span> e<span class="pl-k">.</span>validatorId();
        <span class="pl-c">// Validator returned false</span>
    } <span class="pl-k">else</span> <span class="pl-k">if</span> (e<span class="pl-k">.</span>reason() <span class="pl-k">==</span> <span class="pl-smi">BridgeException</span><span class="pl-c1"><span class="pl-k">.</span>REASON_RESPONSE_VALIDATOR_ERROR</span>) {
        <span class="pl-smi">String</span> validatorId <span class="pl-k">=</span> e<span class="pl-k">.</span>validatorId();
        <span class="pl-smi">String</span> errorMessage <span class="pl-k">=</span> e<span class="pl-k">.</span>getMessage();
        <span class="pl-c">// Validator threw an error</span>
    }
}</pre></div>

<p>The validator is passed before the request returns. Basically, the validator will check if a boolean 
field in the response JSON called <em>success</em> is equal to true. If you had an API on a server that returned 
true or false for this value, you could automatically check if it's true for every request with a single validator.</p>

<p>You can even use multiple validators for a single request:</p>

<div class="highlight highlight-source-java"><pre><span class="pl-smi">ResponseValidator</span> validatorOne <span class="pl-k">=</span> <span class="pl-c">// ...</span>
<span class="pl-smi">ResponseValidator</span> validatorTwo <span class="pl-k">=</span> <span class="pl-c">// ...</span>

<span class="pl-k">try</span> {
    <span class="pl-smi">JSONObject</span> response <span class="pl-k">=</span> <span class="pl-smi">Bridge</span>
        .get(<span class="pl-s"><span class="pl-pds">"</span>http://www.someurl.com/api/test<span class="pl-pds">"</span></span>)
        .validators(validatorOne, validatorTwo)
        .asJsonObject();
} <span class="pl-k">catch</span> (<span class="pl-smi">BridgeException</span> e) {
    <span class="pl-k">if</span> (e<span class="pl-k">.</span>reason() <span class="pl-k">==</span> <span class="pl-smi">BridgeException</span><span class="pl-c1"><span class="pl-k">.</span>REASON_RESPONSE_VALIDATOR_FALSE</span>) {
        <span class="pl-smi">String</span> validatorId <span class="pl-k">=</span> e<span class="pl-k">.</span>validatorId();
        <span class="pl-c">// Validator returned false</span>
    } <span class="pl-k">else</span> <span class="pl-k">if</span> (e<span class="pl-k">.</span>reason() <span class="pl-k">==</span> <span class="pl-smi">BridgeException</span><span class="pl-c1"><span class="pl-k">.</span>REASON_RESPONSE_VALIDATOR_ERROR</span>) {
        <span class="pl-smi">String</span> validatorId <span class="pl-k">=</span> e<span class="pl-k">.</span>validatorId();
        <span class="pl-smi">String</span> errorMessage <span class="pl-k">=</span> e<span class="pl-k">.</span>getMessage();
        <span class="pl-c">// Validator threw an error</span>
    }
}</pre></div>

<p><strong>Notes</strong>: validators work great with async requests too! You can even apply validators
to every request in your application by setting global validators (discussed below).</p>

<hr>

<h1>
<a id="configuration" class="anchor" href="#configuration" aria-hidden="true"><span class="octicon octicon-link"></span></a>Configuration</h1>

<p>Bridge allows you to set various parameters that are maintained
as long as your app stays in memory.</p>

<h3>
<a id="host-configuration" class="anchor" href="#host-configuration" aria-hidden="true"><span class="octicon octicon-link"></span></a>Host Configuration</h3>

<p>You can set a host that is used as the base URL for every request.</p>

<div class="highlight highlight-source-java"><pre><span class="pl-smi">Bridge</span><span class="pl-k">.</span>config()
    .host(<span class="pl-s"><span class="pl-pds">"</span>http://www.google.com<span class="pl-pds">"</span></span>);</pre></div>

<p>With Google's homepage set as the host, the code below would request <code>http://www.google.com/search?q=Hello</code>:</p>

<div class="highlight highlight-source-java"><pre><span class="pl-smi">Bridge</span>
    .get(<span class="pl-s"><span class="pl-pds">"</span>/search?q=%s<span class="pl-pds">"</span></span>, <span class="pl-s"><span class="pl-pds">"</span>Hello<span class="pl-pds">"</span></span>)
    .asString();</pre></div>

<p>Basically, the URL you pass with each request is appended to the end of the host. If you were to pass a full URL 
(beginning with HTTP) in <code>get()</code> above, it would skip using the host for just that request.</p>

<h3>
<a id="default-headers" class="anchor" href="#default-headers" aria-hidden="true"><span class="octicon octicon-link"></span></a>Default Headers</h3>

<p>Default headers are headers that are automatically applied to every request. You don't have to do it yourself with every request in your app.</p>

<div class="highlight highlight-source-java"><pre><span class="pl-smi">Bridge</span><span class="pl-k">.</span>config()
    .defaultHeader(<span class="pl-s"><span class="pl-pds">"</span>User-Agent<span class="pl-pds">"</span></span>, <span class="pl-s"><span class="pl-pds">"</span>Bridge Sample Code<span class="pl-pds">"</span></span>)
    .defaultHeader(<span class="pl-s"><span class="pl-pds">"</span>Content-Type<span class="pl-pds">"</span></span>, <span class="pl-s"><span class="pl-pds">"</span>application/json<span class="pl-pds">"</span></span>)
    .defaultHeader(<span class="pl-s"><span class="pl-pds">"</span>Via<span class="pl-pds">"</span></span>, <span class="pl-s"><span class="pl-pds">"</span>My App<span class="pl-pds">"</span></span>);</pre></div>

<p>Every request, regardless of the method, will include those headers. You can override them at the individual request level by setting the header as you normally would.</p>

<h3>
<a id="timeout-configuration" class="anchor" href="#timeout-configuration" aria-hidden="true"><span class="octicon octicon-link"></span></a>Timeout Configuration</h3>

<p>You can configure how long the library will wait until timing out, either for connections or reading:</p>

<div class="highlight highlight-source-java"><pre><span class="pl-smi">Bridge</span><span class="pl-k">.</span>config()
    .connectTimeout(<span class="pl-c1">10000</span>)
    .readTimeout(<span class="pl-c1">15000</span>);</pre></div>

<p>You can set timeouts at the request level too:</p>

<div class="highlight highlight-source-java"><pre><span class="pl-smi">Bridge</span><span class="pl-k">.</span>get(<span class="pl-s"><span class="pl-pds">"</span>http://someurl.com/bigVideo.mp4<span class="pl-pds">"</span></span>)
    .connectTimeout(<span class="pl-c1">10000</span>)
    .readTimeout(<span class="pl-c1">15000</span>)
    .request();</pre></div>

<h3>
<a id="buffer-size" class="anchor" href="#buffer-size" aria-hidden="true"><span class="octicon octicon-link"></span></a>Buffer Size</h3>

<p>The default buffer size is 1024 * 4 (4096). Basically, when you download a webpage or file, the buffer size is how big the byte array is with each pass. A large buffer size will create a larger byte array, which can affect memory usage, but it also increases the pace in which the content is downloaded.</p>

<p>The buffer size can easily be configured:</p>

<div class="highlight highlight-source-java"><pre><span class="pl-smi">Bridge</span><span class="pl-k">.</span>config()
    .bufferSize(<span class="pl-c1">1024</span> <span class="pl-k">*</span> <span class="pl-c1">10</span>);</pre></div>

<p>Just remember to be careful with how much memory you consume, and test on various devices. 
You can set the buffer size at the request level too:</p>

<div class="highlight highlight-source-java"><pre><span class="pl-smi">Bridge</span><span class="pl-k">.</span>get(<span class="pl-s"><span class="pl-pds">"</span>http://someurl.com/bigVideo.mp4<span class="pl-pds">"</span></span>)
    .bufferSize(<span class="pl-c1">1024</span> <span class="pl-k">*</span> <span class="pl-c1">10</span>)
    .response();</pre></div>

<p><strong>Note</strong>: the buffer size is used in a few other places, such as pre-built Pipe's (Pipe#forUri, Pipe#forStream, etc.).</p>

<h3>
<a id="logging" class="anchor" href="#logging" aria-hidden="true"><span class="octicon octicon-link"></span></a>Logging</h3>

<p>By default, logging is disabled. You can enable logging to see what the library is doing in your Logcat:</p>

<div class="highlight highlight-source-java"><pre><span class="pl-smi">Bridge</span><span class="pl-k">.</span>config()
    .logging(<span class="pl-c1">true</span>);</pre></div>

<h3>
<a id="global-validators" class="anchor" href="#global-validators" aria-hidden="true"><span class="octicon octicon-link"></span></a>Global Validators</h3>

<p>Validators for individual requests were shown above. You can apply validators to every request in your application:</p>

<div class="highlight highlight-source-java"><pre><span class="pl-smi">Bridge</span><span class="pl-k">.</span>config()
    .validators(<span class="pl-k">new</span> <span class="pl-smi">ResponseValidator</span>() {
        <span class="pl-k">@Override</span>
        <span class="pl-k">public</span> <span class="pl-k">boolean</span> <span class="pl-en">validate</span>(<span class="pl-k">@NonNull</span> <span class="pl-smi">Response</span> <span class="pl-v">response</span>) <span class="pl-k">throws</span> <span class="pl-smi">Exception</span> {
            <span class="pl-smi">JSONObject</span> json <span class="pl-k">=</span> response<span class="pl-k">.</span>asJsonObject();
            <span class="pl-k">return</span> json<span class="pl-k">.</span>getBoolean(<span class="pl-s"><span class="pl-pds">"</span>success<span class="pl-pds">"</span></span>);
        }

        <span class="pl-k">@NonNull</span>
        <span class="pl-k">@Override</span>
        <span class="pl-k">public</span> <span class="pl-smi">String</span> <span class="pl-en">id</span>() {
            <span class="pl-k">return</span> <span class="pl-s"><span class="pl-pds">"</span>custom-validator<span class="pl-pds">"</span></span>;
        }
    });</pre></div>

<p><strong>Note</strong>: you can pass multiple validators into the <code>validators()</code> method just like the individual request version.</p>

<hr>

<h1>
<a id="cleanup" class="anchor" href="#cleanup" aria-hidden="true"><span class="octicon octicon-link"></span></a>Cleanup</h1>

<p>When you're done with Bridge (e.g. your app is terminating), you should call the <code>destroy()</code> method to avoid any memory leaks. Your app would be fine without this, but this is good practice and it helps speed up Java's garbage collection.</p>

<div class="highlight highlight-source-java"><pre><span class="pl-smi">Bridge</span><span class="pl-k">.</span>destroy();</pre></div>

<p><strong>Note</strong>: Calling this method will also cancel all active requests for you.</p>

<hr>

<h1>
<a id="request-conversion" class="anchor" href="#request-conversion" aria-hidden="true"><span class="octicon octicon-link"></span></a>Request Conversion</h1>

<p>Bridge's request conversion feature allows you to use Java object instances directly as a request body. 
Objects are serialized directly into a format such as JSON.</p>

<h3>
<a id="json-request-conversion" class="anchor" href="#json-request-conversion" aria-hidden="true"><span class="octicon octicon-link"></span></a>JSON Request Conversion</h3>

<p>Take this class for an example:</p>

<div class="highlight highlight-source-java"><pre>@ContentType(<span class="pl-s"><span class="pl-pds">"</span>application/json<span class="pl-pds">"</span></span>)
<span class="pl-k">public</span> <span class="pl-k">class</span> <span class="pl-en">Person</span> {

    <span class="pl-k">public</span> <span class="pl-en">Person</span>() {
    }

    <span class="pl-k">public</span> <span class="pl-en">Person</span>(<span class="pl-smi">String</span> <span class="pl-v">name</span>, <span class="pl-k">int</span> <span class="pl-v">age</span>) {
        <span class="pl-v">this</span><span class="pl-k">.</span>name <span class="pl-k">=</span> name;
        <span class="pl-v">this</span><span class="pl-k">.</span>age <span class="pl-k">=</span> age;
    }

    <span class="pl-k">@Header</span>(<span class="pl-c1">name</span> <span class="pl-k">=</span> <span class="pl-s"><span class="pl-pds">"</span>Custom-Header<span class="pl-pds">"</span></span>)
    <span class="pl-k">public</span> <span class="pl-smi">String</span> customHeader;

    <span class="pl-k">@Body</span>(<span class="pl-c1">name</span> <span class="pl-k">=</span> <span class="pl-s"><span class="pl-pds">"</span>full_name<span class="pl-pds">"</span></span>)
    <span class="pl-k">public</span> <span class="pl-smi">String</span> name;
    <span class="pl-k">@Body</span>
    <span class="pl-k">public</span> <span class="pl-k">int</span> age;
    <span class="pl-k">@Body</span>
    <span class="pl-k">public</span> <span class="pl-smi">Person</span> spouse;   
}</pre></div>

<p>The <code>ContentType</code> annotation is used to lookup what request converter should be used. The annotation's value
also gets applied as the <code>Content-Type</code> header of requests the object is passed in to.</p>

<p>The <code>Header</code> annotation can be used to apply request header values.</p>

<p>The <code>Body</code> annotations indicate fields that are serialized into the response body. The optional name
parameter can be used if the output name of the field should be different than the actual name of the field.</p>

<p>You can use instances of this class as a request body. Fields not marked with the <code>Header</code> or <code>Body</code>
annotation are ignored.</p>

<div class="highlight highlight-source-java"><pre><span class="pl-smi">Person</span> person <span class="pl-k">=</span> <span class="pl-k">new</span> <span class="pl-smi">Person</span>(<span class="pl-s"><span class="pl-pds">"</span>Aidan Follestad<span class="pl-pds">"</span></span>, <span class="pl-c1">20</span>);
person<span class="pl-k">.</span>girlfriend <span class="pl-k">=</span> <span class="pl-k">new</span> <span class="pl-smi">Person</span>(<span class="pl-s"><span class="pl-pds">"</span>Waverly Moua<span class="pl-pds">"</span></span>, <span class="pl-c1">18</span>);
<span class="pl-smi">Request</span> request <span class="pl-k">=</span> <span class="pl-smi">Bridge</span>
    .post(<span class="pl-s"><span class="pl-pds">"</span>https://someurl.com/post.js<span class="pl-pds">"</span></span>)
    .body(person)
    .request();</pre></div>

<p>You can even send arrays or lists of this object as a request body (and it gets converted to a JSON Array):</p>

<div class="highlight highlight-source-java"><pre><span class="pl-k">Person</span>[] people <span class="pl-k">=</span> <span class="pl-k">new</span> <span class="pl-smi">People</span>[] {
    <span class="pl-k">new</span> <span class="pl-smi">Person</span>(<span class="pl-s"><span class="pl-pds">"</span>Aidan Follestad<span class="pl-pds">"</span></span>, <span class="pl-c1">20</span>),
    <span class="pl-k">new</span> <span class="pl-smi">Person</span>(<span class="pl-s"><span class="pl-pds">"</span>Waverly Moua<span class="pl-pds">"</span></span>, <span class="pl-c1">18</span>)
};
<span class="pl-smi">Request</span> request <span class="pl-k">=</span> <span class="pl-smi">Bridge</span>
    .post(<span class="pl-s"><span class="pl-pds">"</span>https://someurl.com/post.js<span class="pl-pds">"</span></span>)
    .body(people)
    .request();</pre></div>

<h3>
<a id="dot-notation" class="anchor" href="#dot-notation" aria-hidden="true"><span class="octicon octicon-link"></span></a>Dot Notation</h3>

<p>I thought this was worthy of its own section. Bridge supports dot notation, which is better explained by example. 
Take this class:</p>

<div class="highlight highlight-source-java"><pre>@ContentType(<span class="pl-s"><span class="pl-pds">"</span>application/json<span class="pl-pds">"</span></span>)
<span class="pl-k">public</span> <span class="pl-k">static</span> <span class="pl-k">class</span> <span class="pl-en">Person</span> {

    <span class="pl-k">public</span> <span class="pl-en">Person</span>() {
    }

    <span class="pl-k">public</span> <span class="pl-en">Person</span>(<span class="pl-smi">String</span> <span class="pl-v">name</span>, <span class="pl-k">int</span> <span class="pl-v">age</span>) {
        <span class="pl-v">this</span><span class="pl-k">.</span>name <span class="pl-k">=</span> name;
        <span class="pl-v">this</span><span class="pl-k">.</span>age <span class="pl-k">=</span> age;
    }

    <span class="pl-k">@Body</span>(<span class="pl-c1">name</span> <span class="pl-k">=</span> <span class="pl-s"><span class="pl-pds">"</span>person.name<span class="pl-pds">"</span></span>)
    <span class="pl-k">public</span> <span class="pl-smi">String</span> name <span class="pl-k">=</span> <span class="pl-s"><span class="pl-pds">"</span>Aidan<span class="pl-pds">"</span></span>;
    <span class="pl-k">@Body</span>(<span class="pl-c1">name</span> <span class="pl-k">=</span> <span class="pl-s"><span class="pl-pds">"</span>person.age.$t<span class="pl-pds">"</span></span>)
    <span class="pl-k">public</span> <span class="pl-k">int</span> age <span class="pl-k">=</span> <span class="pl-c1">20</span>;
}</pre></div>

<p>When converted to JSON, it will appear like this:</p>

<div class="highlight highlight-source-json"><pre>{
    <span class="pl-s"><span class="pl-pds">"</span>person<span class="pl-pds">"</span></span>: {
        <span class="pl-s"><span class="pl-pds">"</span>name<span class="pl-pds">"</span></span>: <span class="pl-s"><span class="pl-pds">"</span>Aidan<span class="pl-pds">"</span></span>,
        <span class="pl-s"><span class="pl-pds">"</span>age<span class="pl-pds">"</span></span>: {
            <span class="pl-s"><span class="pl-pds">"</span>$t<span class="pl-pds">"</span></span>: <span class="pl-c1">20</span>
        }
    }
}</pre></div>

<p>The dots in the names of the <code>Body</code> annotation parameters indicate a path of objects that it takes
to reach the value.</p>

<h3>
<a id="request-conversion-api" class="anchor" href="#request-conversion-api" aria-hidden="true"><span class="octicon octicon-link"></span></a>Request Conversion API</h3>

<p>Bridge comes stock with a JSON request converter, but the API is extensible for people like you.</p>

<p>See the <a href="https://github.com/afollestad/bridge/blob/master/bridge/src/main/java/com/afollestad/bridge/conversion/JsonRequestConverter.java">JsonRequestConverter</a> 
source code for an example of how a <code>RequestConverter</code> is made. It should come off as simple.</p>

<p>When you have a custom converter made, you can register it to a Content-Type:</p>

<div class="highlight highlight-source-java"><pre><span class="pl-smi">Bridge</span><span class="pl-k">.</span>config()
    .requestConverter(<span class="pl-s"><span class="pl-pds">"</span>application/json<span class="pl-pds">"</span></span>, <span class="pl-k">new</span> <span class="pl-smi">JsonRequestConverter</span>());</pre></div>

<hr>

<h1>
<a id="response-conversion" class="anchor" href="#response-conversion" aria-hidden="true"><span class="octicon octicon-link"></span></a>Response Conversion</h1>

<p>Bridge's response conversion feature allows you convert responses directly to Java object instances. Objects
are de-serialized from a format such as jSON.</p>

<h3>
<a id="json-response-conversion" class="anchor" href="#json-response-conversion" aria-hidden="true"><span class="octicon octicon-link"></span></a>JSON Response Conversion</h3>

<p>Take this class for an example (notice that the <code>ContentType</code> annotation is not used with response 
conversion, but it should be left there if you plan on using request conversion):</p>

<div class="highlight highlight-source-java"><pre><span class="pl-k">public</span> <span class="pl-k">class</span> <span class="pl-en">Person</span> {

    <span class="pl-k">public</span> <span class="pl-en">Person</span>() {
    }

    <span class="pl-k">public</span> <span class="pl-en">Person</span>(<span class="pl-smi">String</span> <span class="pl-v">name</span>, <span class="pl-k">int</span> <span class="pl-v">age</span>) {
        <span class="pl-v">this</span><span class="pl-k">.</span>name <span class="pl-k">=</span> name;
        <span class="pl-v">this</span><span class="pl-k">.</span>age <span class="pl-k">=</span> age;
    }

    <span class="pl-k">@Header</span>(<span class="pl-c1">name</span> <span class="pl-k">=</span> <span class="pl-s"><span class="pl-pds">"</span>Custom-Header<span class="pl-pds">"</span></span>)
    <span class="pl-k">public</span> <span class="pl-smi">String</span> customHeader;

    <span class="pl-k">@Body</span>(<span class="pl-c1">name</span> <span class="pl-k">=</span> <span class="pl-s"><span class="pl-pds">"</span>full_name<span class="pl-pds">"</span></span>)
    <span class="pl-k">public</span> <span class="pl-smi">String</span> name;
    <span class="pl-k">@Body</span>
    <span class="pl-k">public</span> <span class="pl-k">int</span> age;
    <span class="pl-k">@Body</span>
    <span class="pl-k">public</span> <span class="pl-smi">Person</span> spouse;   
}</pre></div>

<p>Imagine a URL that returns JSON like this:</p>

<div class="highlight highlight-source-json"><pre>{
    <span class="pl-s"><span class="pl-pds">"</span>name<span class="pl-pds">"</span></span>: <span class="pl-s"><span class="pl-pds">"</span>Aidan Follestad<span class="pl-pds">"</span></span>,
    <span class="pl-s"><span class="pl-pds">"</span>age<span class="pl-pds">"</span></span>: <span class="pl-c1">20</span>,
    <span class="pl-s"><span class="pl-pds">"</span>spouse<span class="pl-pds">"</span></span>: {
        <span class="pl-s"><span class="pl-pds">"</span>name<span class="pl-pds">"</span></span>: <span class="pl-s"><span class="pl-pds">"</span>Waverly Moua<span class="pl-pds">"</span></span>,
        <span class="pl-s"><span class="pl-pds">"</span>age<span class="pl-pds">"</span></span>: <span class="pl-c1">18</span>
    }
}</pre></div>

<p>You can retrieve that URL and convert the contents directly to a <code>Person</code> instance like this:</p>

<div class="highlight highlight-source-java"><pre><span class="pl-smi">Bridge</span><span class="pl-k">.</span>get(<span class="pl-s"><span class="pl-pds">"</span>https://www.someurl.com/person.json<span class="pl-pds">"</span></span>)
    .asClass(<span class="pl-smi">Person</span><span class="pl-k">.</span>class, <span class="pl-k">new</span> <span class="pl-k">ResponseConvertCallback&lt;<span class="pl-smi">Person</span>&gt;</span>() {
        <span class="pl-k">@Override</span>
        <span class="pl-k">public</span> <span class="pl-k">void</span> <span class="pl-en">onResponse</span>(<span class="pl-k">@NonNull</span> <span class="pl-smi">Response</span> <span class="pl-v">response</span>, <span class="pl-k">@Nullable</span> <span class="pl-smi">Person</span> <span class="pl-v">object</span>, <span class="pl-k">@Nullable</span> <span class="pl-smi">BridgeException</span> <span class="pl-v">e</span>) {
            <span class="pl-c">// Use response object</span>
        }
    });</pre></div>

<p>You can even retrieve arrays of JSON:</p>

<div class="highlight highlight-source-json"><pre>[
    {
        <span class="pl-s"><span class="pl-pds">"</span>name<span class="pl-pds">"</span></span>: <span class="pl-s"><span class="pl-pds">"</span>Aidan Follestad<span class="pl-pds">"</span></span>,
        <span class="pl-s"><span class="pl-pds">"</span>age<span class="pl-pds">"</span></span>: <span class="pl-c1">20</span>,
        <span class="pl-s"><span class="pl-pds">"</span>spouse<span class="pl-pds">"</span></span>: {
            <span class="pl-s"><span class="pl-pds">"</span>name<span class="pl-pds">"</span></span>: <span class="pl-s"><span class="pl-pds">"</span>Waverly Moua<span class="pl-pds">"</span></span>,
            <span class="pl-s"><span class="pl-pds">"</span>age<span class="pl-pds">"</span></span>: <span class="pl-c1">18</span>
        }
    },
    {
        <span class="pl-s"><span class="pl-pds">"</span>name<span class="pl-pds">"</span></span>: <span class="pl-s"><span class="pl-pds">"</span>Waverly Moua<span class="pl-pds">"</span></span>,
        <span class="pl-s"><span class="pl-pds">"</span>age<span class="pl-pds">"</span></span>: <span class="pl-c1">18</span>
    }
]</pre></div>

<div class="highlight highlight-source-java"><pre><span class="pl-smi">Bridge</span><span class="pl-k">.</span>get(<span class="pl-s"><span class="pl-pds">"</span>https://www.someurl.com/person_array.json<span class="pl-pds">"</span></span>)
    .asClassArray(<span class="pl-smi">Person</span><span class="pl-k">.</span>class, <span class="pl-k">new</span> <span class="pl-k">ResponseConvertCallback&lt;<span class="pl-k">Person</span>[]&gt;</span>() {
        <span class="pl-k">@Override</span>
        <span class="pl-k">public</span> <span class="pl-k">void</span> <span class="pl-en">onResponse</span>(<span class="pl-k">@NonNull</span> <span class="pl-smi">Response</span> <span class="pl-v">response</span>, <span class="pl-k">@Nullable</span> <span class="pl-k">Person</span>[] <span class="pl-v">objects</span>, <span class="pl-k">@Nullable</span> <span class="pl-smi">BridgeException</span> <span class="pl-v">e</span>) {
            <span class="pl-c">// Use response objects</span>
        }
    });</pre></div>

<h3>
<a id="dot-notation-1" class="anchor" href="#dot-notation-1" aria-hidden="true"><span class="octicon octicon-link"></span></a>Dot Notation</h3>

<p>See <a href="https://github.com/afollestad/bridge#dot-notation">Dot Notation</a> under the Request Conversion API
 for details. It works the same way here, just in reverse.</p>

<h3>
<a id="response-conversion-api" class="anchor" href="#response-conversion-api" aria-hidden="true"><span class="octicon octicon-link"></span></a>Response Conversion API</h3>

<p>Bridge comes stock with a JSON response converter, but the API is extensible for people like you.</p>

<p>See the <a href="https://github.com/afollestad/bridge/blob/master/bridge/src/main/java/com/afollestad/bridge/conversion/JsonResponseConverter.java">JsonResponseConverter</a> 
source code for an example of how a <code>ResponseConverter</code> is made. It should come off as simple.</p>

<p>When you have a custom converter made, you can register it to a Content-Type:</p>

<div class="highlight highlight-source-java"><pre><span class="pl-smi">Bridge</span><span class="pl-k">.</span>config()
    .responseConverter(<span class="pl-s"><span class="pl-pds">"</span>application/json<span class="pl-pds">"</span></span>, <span class="pl-k">new</span> <span class="pl-smi">JsonResponseConverter</span>());</pre></div>

      <footer class="site-footer">
        <span class="site-footer-owner"><a href="https://github.com/afollestad/bridge">Bridge</a> is maintained by <a href="https://github.com/afollestad">afollestad</a>.</span>

        <span class="site-footer-credits">This page was generated by <a href="https://pages.github.com">GitHub Pages</a> using the <a href="https://github.com/jasonlong/cayman-theme">Cayman theme</a> by <a href="https://twitter.com/jasonlong">Jason Long</a>.</span>
      </footer>

    </section>

  
  </body>
</html>
